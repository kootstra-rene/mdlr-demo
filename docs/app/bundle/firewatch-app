'use strict';globalThis.mdlr=(()=>{let e,t,i,n,r={},l=(e,t,i={})=>e(t,{name:t,build:(n,r)=>([t,e]=s(n),i[n]??l(e,t,r)),require:(n,r)=>([t,e]=s(n),i[n]??l(e,t,r))}),u=(e,t)=>{/^\[mdlr\]::[a-z]+$/.test(e)?t(c):r[e]=t},a=(e,t)=>r[e](t),s=i=>([,e="unit",t]=/^(?:\[([a-z]+)\])?([-:\w]+)$/.exec(i),[`[${e}]`+t,...c[e]]),c={mdlr:[a,u],unit:[a,u]};return(e,r)=>{[t,n,i]=s(e),r instanceof Function?i(t,r):l(n,t,r)}})();mdlr('[mdlr]::web',(e=>{const t={},n=new Map,s=new Map,_=null,r=()=>{},o=Reflect.ownKeys,i=globalThis,$=i.document,l=$.body,a=(e,t)=>e?.includes(t)??!1,c=e=>e.length,d=(e,t="")=>e.join(t),h=(e,...t)=>e.push(...t),f=['DocumentFragment','ElementNS','TextNode'].map((e=>$['create'+e].bind($))),u=['connected','disconnected','beforeRender','construct'],[p,m]=u.map((e=>e+'Callback')),b=()=>{throw new Error},g=(e="\n",t=[],n)=>n=(...s)=>c(s)?(h(t,...s),n):d(t,e),w=(e,t)=>new Function(e,t),v={html:'',style:'display:contents',global:''},E=['html','style','global'],S=(e,t,n,...s)=>e[t]=String.raw({raw:n},...s.map((e=>Array.isArray(e)?d(e):e))),A=(e,t=new CSSStyleSheet)=>{$.adoptedStyleSheets=[...$.adoptedStyleSheets,t],t.replaceSync(e)},y=e=>{let t,n,s=!1,r=[];for([t,n]of e)t&&h(r,`\`${t}\``),n&&h(r,`(${n})`),void 0!==n&&(s=!0);return[s,r]},C=new WeakMap,I=(e,t,i)=>{A(`${t.global}${e}:defined{${t.style}}`);const $=t=>{let o,$=new i,[l,a,u]=n.get(e)??[],p=[],m=((e,t,n,r)=>[(t,n="")=>(h(e,[t,n,Reflect.has(t,n),[]]),t),(t,...n)=>{let[s,r,o,i]=e[t],$=c(n),l=!1;for(let e=0;e<$;++e){let t=n[e];i[e]!==t&&(i[e]=t,l=!0)}if(l)if(r){if(o)try{return void(s[r]=(e=>!0===e||!1===e?e:_)(i[0])??d(i))}catch{}!1===i[0]?s.removeAttribute(r):s.setAttribute(r,!0===i[0]?'':d(i))}else s.nodeValue=d(i)},_=>{t.size&&(t.forEach(((e,t)=>{e.forEach(((e,n)=>t.removeEventListener(n,e))),e.clear()})),t.clear()),e.splice(0,1/0),n.splice(0,1/0)},(e,t)=>(e===r&&(n.push(...e.children),e.textContent=''),e.append(t),t),(t,n)=>{const[r]=e[t],[o,i]=s.get(r);for(let e of i)void 0!==n[e]&&o[e]!==n[e]&&(o[e]=n[e])},e=>{const[t]=s.get(e);return t},(e,n,s)=>{let r=t.get(e);r||t.set(e,r=new Map),r.has(n)&&e.removeEventListener(n,r.get(n)),e.addEventListener(n,s),r.set(n,s)}])([],new Map,p,t),g=[t,$,...f,...m,[]],[w,v,E]=u.map((e=>e?e.bind(...g):e)),S=-1;((e,t)=>{e.forEach((e=>t[e]=(t[e]??r).bind(t)))})(a,$),$.construct();let A=[];s.set(t,[$,l,m,(e,n)=>{if(!(S>e)){if(!n&&$.$stable){const e=$.$stable();let t=!1;for(let n=0;n<e.length;++n)t=!t&&A[n]!==e[n],A[n]=e[n];if(!t)return}(E&&!E()||n)&&w(),o=t.hidden?100:$.beforeRender(e)??4,o<=0&&b(),S=e-e%o+o,t.hidden||v()}},p])},l=e=>{const[n,,,r,o]=s.get(e);t.autohide&&F.observe(e),r(0,!0),e.querySelectorAll('slot').forEach((e=>{const t=o.find((t=>t.slot===e.name));e.replaceWith(...t?[t]:e.childNodes)})),n.connected(e,o)},v=e=>{let[n,,{2:r}]=s.get(e);t.autohide&&F.unobserve(e),s.delete(e),n.disconnected(e),e.textContent='',r()};(()=>{let s=new i,[$,l,c]=n.get(e)??[];c||(console.log(e),$=[...o(s),...o(i.prototype).filter((e=>!a(['constructor',...u],e)))],l=[...u,...$.filter((e=>s[e]instanceof Function))],c=((e,t,s)=>{let o,i,$,l,c,f,u,p,m,v=0;const E=t.require(':web:parser'),S="$S,$F,$E,$T,$I,$U,$R,$A,$P,$Q,$Z,$l",A=g(),C=g(),I=g(),x=e=>{A(e),C(e),I(e),++v},F=e=>{A(e),C(e),++v},M=(e,n,r,i)=>{let $=!1;'.'===n[0]&&(n=n.slice(1),$=!0),'on'===n?r.forEach((([t,n])=>{let r=n??t;for(let[,e,t]of(n??'').matchAll(D))a(s,t)&&(r=r.replace(e,`$S.${e}`));let o=s.filter((e=>r.includes(e)));A(`$Z(${e},'${t}',e=>{const{${o}}=$S;(${r})(e)});`)})):([o,c]=y(i),p=d(c,',')||n,o?(A(`$I(${e},'${n}');++$i;`),C('++$i'),a(f,n)||$?($||console.warn(t.name,`please use '.${n}'`),$=!0):F(`$U($i,${p});`)):'autohide'===n&&'this'===e?t.autohide=!0:'autofocus'===n?(A(`queueMicrotask((e=>{e.focus()}).bind(${e},${e}));`),A(`${e}.setAttribute('${n}','');`)):a(f,n)||$?($||console.warn(t.name,`please use '.${n}'`),$=!0):(m=d(c)||"''",A(`${e}.setAttribute('${n}',${m});`)),$&&F(`$P($i, {${n}:${p}});`),r.forEach((([t])=>{a(s,t??n)&&A(`$S['${t??n}']=${e}.getAttributeNode('${n}');`)})))},z=[],R=(e="")=>{x(`${z.pop()}${e}`)},q={'#each':e=>{[i,l]=e.split(/\s+in\s+/),x(`var $c=${l};`),x("if($($c&&($c.length??$c.size??!0))){"),x(`$c.forEach((${i})=>{`),h(z,'})}')},'/each':e=>{R()},'#if':e=>{x(`if($(${e})){`),h(z,'}')},'/if':e=>{R()},':else':e=>{R('else{'),h(z,'}')},':elseif':e=>{R(`else if($(${e})){`),h(z,'}')},':self':t=>{E(`<${e} ${t||''}/>`,[(e,t=_)=>{t?.forEach((([t])=>{a(s,t??e)&&A(`$S['${t??e}']=this;`)}))},M.bind(_,'this'),r])}};x(`let $i=-1,$=v=>v,{${s}}=$S;`),A("$R();","$r=$F();"),I("$=v=>(($l[++$i]!==v)&&($l[$i]=v,$s=!1),v);"),v=0;const D=/(?:[^.a-zA-Z])(([a-zA-Z]+)\s*[=])(?:[^>])/g;return E(t.html,[(e,t=_)=>{u=e,[f]=n.get(u)??[],t?(A('svg'===e?`$r=$A($r,$E('http://www.w3.org/2000/svg','${e}'));`:`$r=$A($r,$E($r.namespaceURI??'http://www.w3.org/1999/xhtml','${e}'));`),t.forEach((([t,n])=>{let[r,o]=t?.split('[')??[];o&&(o='['+o),t&&'.'===t[0]&&A(`$S['${t.slice(1)}']=$Q($r);`),a(s,r??e)&&A(`$S['${r??e}']${o??''}=$r;`),n!==_&&($=`$P(++$i,${n||'$S'});`,A("$I($r);",$),C($))}))):A("$r=$r.parentNode;")},M.bind(_,'$r'),e=>{[o,c]=y(e),o?(A("$A($r,$I($T('')));++$i;"),C(`$U(++$i,${d(c,',')});`)):A(`$A($r,$T(${d(c)}));`)},(e,t)=>(q[e]??b)(t)]),A("this.textContent='';","$A(this,$r);"),I("return $s;"),[w(S+',$r,$e',A()),w(S,C()),v?w(S+',$s=!0',I()):_]})(e,t,$),n.set(e,[$,l,c]))})(),customElements.define(e,class extends HTMLElement{static get disabledFeatures(){return["shadow"]}constructor(){super(),C.set(this,{isInDocument:!1}),$(this)}[p](){const t=C.get(this);t.isInDocument?console.warn(e,'repositioned',this):(t.isInDocument=!0,l(this))}[m](){const e=C.get(this);e.isInDocument=!1,queueMicrotask((()=>{this.isConnected||e.isInDocument||v(this)}))}})},x=e=>{s.forEach((({3:t})=>t(e))),requestAnimationFrame((e=>x(e)))};let F=new IntersectionObserver((e=>{for(let{target:t,isIntersecting:n}of e)t.hidden=!n}),{root:_});e.web=[(e,s)=>{const[r]=/([a-z][a-z0-9-]*)$/.exec(e),o=structuredClone(v);if(!n.has(r)){E.forEach((e=>s[e]=S.bind(_,o,e)));let n=t[e](s)??class{};E.forEach((e=>s[e]=o[e])),I(r,s,n)}},(e,n)=>{t[e]=n}],$.addEventListener('readystatechange',(e=>{if('complete'===$.readyState)for(;l.firstChild!==l.lastChild;)l.removeChild(l.firstChild)})),i.addEventListener('pagehide',(e=>{e.persisted||(l.textContent='')})),A("body{all:initial;position:fixed;inset:0}*,*::before,*::after{box-sizing:border-box}"),requestAnimationFrame(x)}));mdlr(':web:parser',(r=>{const e=/([.]?[a-zA-Z][a-zA-Z0-9-.]*)?/g,t=/([\x09\x0a\x0d\x20]+)?/g,o=/([^"{]+)?/g,f=/([^<{]+)/g,n=/(?:([#:/][a-z]*)\s*)?/g,l=/(?:([a-z.\[\]]+)?(?:\s*(=)\s*)?)?/g,s=/([^{(})]+)|([{(])|([})])?/g,_=null,[a,g,u,x,i,p,c,d,z]=[...'"()/<=>{}'],h={[u]:g,[z]:d},w=()=>{throw new Error},A=(r,...e)=>r.push(...e),I=r=>r.pop(),Z=r=>r.length;return(r,g,u,z,b=[],m=[])=>{const[E,j,k,q]=g,[v,y,B]=(r=>{let e=0;return[(...t)=>{let o,f,n,l,s=[];for(o of t)o.lastIndex=l=e,[n,...f]=o.exec(r),e=o.lastIndex,e-l!==Z(n)&&w(),A(s,...f);return s},t=>t===r[e]&&(++e,!0),()=>e<Z(r)]})(r),C=(r,e=[])=>{if(y(d)){let t,o,f,n=[d],l='',[a,g]=v(r);for(;B()&&([t,o,f]=v(s),!f||(h[f]!==I(n)&&w(),Z(n)));)o&&A(n,o),l+=t??o??f??'';return A(e,[a||_,l||(g?'':_)]),!0}return!1},D=r=>{if(y(a))for(;B()&&!y(a);)C(n,r)||A(r,v(o))},F=(r,o,f)=>{for(;B()&&([,r]=v(t,e,t),r);){for(o=[],f=[];C(l,o););v(t),y(p)&&(v(t),C(n,f)||D(f)),j(r,o,f)}},G=()=>{Z(b)&&(k(b),b=[])};let H,J,K,L=[];for(;B();)if(y(i)){if(G(),z=y(x),[u]=v(e,t),u&&'script'!==u||w(),!z){for(A(L,u),K=[];C(l,K););E(u,K),F()}(z||y(x))&&(u!==I(L)&&w(),E(u,_)),y(c)||w()}else C(n,m)?([H,J]=m[0]??[],H?(G(),q(H,J)):A(b,[_,J]),m=[]):A(b,v(f));G(),Z(L)&&w()}}));mdlr('[web]firewatch-app',(t=>{const i='https://www.firewatchgame.com/images/parallax/parallax';return t.html`{#each l, i in layers}<div style="top: {-scrollTop * (l / layers.length)}px"><img alt="layer-#{l}" src="${i}{l}.png"/>{#if l === 7}<span style="opacity:{opacity.toFixed(2)}">scroll down</span>{/if}</div>{/each}<main{}><img alt="layer-#8" src="${i}8.png"/><div>You have scrolled {scrollTop.toFixed(1)} pixels.</div></main>`,t.style`all: initial;display: block;background-color: rgb(32,0,1);height: 100%;max-width: 1920px;left: 50%;transform: translateX(-50%);position: absolute;> main {height: 100%;width: 100%;overflow: hidden auto;position: relative;> div {position: absolute;text-align: center;height: 100%;width: 100%;background-color: rgb(32,0,1);color: white;padding: 5rem;top: 712px;}}> div {position: fixed;width: 100%;overflow: hidden;text-align: center;> span {display: block;position: absolute;top: 4em;font-size: 1em;text-transform: uppercase;width:100%;color: rgb(220,113,43);}}> div > img, > main > img {position: relative;height: 712px;width: 2400px;left: 50%;top: 0px;transform: translate(-50%,0);}`,class{layers=[0,1,2,3,4,5,6,7];main;get opacity(){return Math.max(1-Math.max(0,this.scrollTop/60),0)}get scrollTop(){return this.main?.scrollTop||0}}}));mdlr('[web]firewatch-app')