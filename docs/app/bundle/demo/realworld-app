'use strict';globalThis.mdlr=(()=>{let r,e,t,l={},n=(r,e,t={})=>r.l(e,{name:e,require:(l,i)=>([e,r]=a(l),t[l]??n(r,e,i))}),i=(r,e)=>{/^\[mdlr\]::[a-z]+$/.test(r)?e(s):l[r]=e},u=(r,e)=>l[r](e),a=t=>([,r="unit",e]=/^(?:\[([a-z]+)\])?([-:\w]+)$/.exec(t),[`[${r}]`+e,s[r]]),s={mdlr:{r:i,l:u},unit:{r:i,l:u}};return(r,l)=>{[e,t]=a(r),l instanceof Function?t.r(e,l):n(t,e,l)}})();mdlr('[mdlr]::web',(e=>{const t={},$=new Map,r=new Map,_=null,n=()=>{},o=Reflect.ownKeys,i=window.document,s=i.body,l=(e,t)=>e?.includes(t)??!1,c=e=>e.length,a=(e,t="")=>e.join(t),d=(e,...t)=>e.push(...t),f=['DocumentFragment','ElementNS','TextNode'].map((e=>i['create'+e].bind(i))),h=['construct','connected','disconnected','beforeRender'],u=()=>{throw new Error},b=(e="\n",t=[],$)=>$=(...r)=>c(r)?(d(t,...r),$):a(t,e),p=(e,t)=>new Function(e,t),m={html:'',style:'display:contents',global:''},v=['html','style','global'],w=(e,t,$,...r)=>e[t]=String.raw({raw:$},...r.map((e=>Array.isArray(e)?a(e):e))),g=(e,t=new CSSStyleSheet)=>{i.adoptedStyleSheets=[...i.adoptedStyleSheets,t],t.replaceSync(e)},E=e=>{let t,$,r=!1,n=[];for([t,$]of e)t&&d(n,`\`${t}\``),$&&d(n,`(${$})`),void 0!==$&&(r=!0);return[r,''.concat(...n),n]},S=(e,t,i)=>{g(`${e}{${t.style}}${t.global}`),(()=>{let r=new i,[s,c,f]=$.get(e)??[];f||(s=[...o(r),...o(i.prototype).filter((e=>!l(['constructor',...h],e)))],c=[...h,...s.filter((e=>r[e]instanceof Function))],f=((e,t,r)=>{let o,i,s,c,f,h,m,v,w;const g=t.require('[mdlr]::web:parser'),S="$S,$F,$E,$T,$I,$U,$R,$A,$P,$Q,$Z,$l",y=b(),A=b(),C=b(),x=e=>{y(e),A(e),C(e)},k=(e,$,n,i)=>{[o,s,f]=E(i),v=a(f,',')||$,w=a(f)||"''",'on'===$?n.forEach((([t,$])=>{let n=$??t;for(let[,e,t]of($??'').matchAll(F))l(r,t)&&(n=n.replace(e,`$S.${e}`));let o=r.filter((e=>n.includes(e)));y(`$Z(${e},'${t}',e=>{const{${o}}=$S;(${n})(e)});`)})):(o?(y(`$I(${e},'${$}');++$i;`),l(h,$)?(y(`$P($i, {${$}:${v}});`),A(`$P(++$i, {${$}:${v}});`)):A(`$U(++$i,${v});`)):'autohide'===$&&'this'===e?t.autohide=!0:'autofocus'===$?(y(`queueMicrotask((e=>{e.focus()}).bind(${e},${e}));`),y(`${e}.setAttribute('${$}','');`)):l(h,$)?y(`$P($i, {${$}:${v}});`):y(`${e}.setAttribute('${$}',${w});`),n.forEach((([t])=>{l(r,t??$)&&y(`$S['${t??$}']=${e}.getAttributeNode('${$}');`)})))},z=[],I=(e="")=>{x(`${z.pop()}${e}`)},R={'#each':e=>{[i,c]=e.split(/\s+in\s+/),x(`var $c=${c};`),x("if($($c?.length??$c?.size??!!$c)){"),x(`$c.forEach((${i})=>{`),d(z,'})}')},'/each':e=>{I()},'#if':e=>{x(`if($(${e})){`),d(z,'}')},'/if':e=>{I()},':else':e=>{I('else{'),d(z,'}')},':elseif':e=>{I(`else if($(${e})){`),d(z,'}')},':self':t=>{g(`<${e} ${t||''}>`,[(e,t=_)=>{t.forEach((([t])=>{l(r,t??e)&&y(`$S['${t??e}']=this;`)}))},k.bind(_,'this'),n])}};x(`let $i=-1,$=v=>v,{${r}}=$S;`),y("$R();","$r=$F();"),C("$=v=>(($l[++$i]!==v)&&($l[$i]=v,$s=!1),v);");const F=/(?:[^.a-zA-Z])(([a-zA-Z]+)\s*[=])(?:[^>])/g;return g(t.html,[(e,t=_)=>{m=e,[h]=$.get(m)??[],t?(y('svg'===e?`$r=$A($r,$E('http://www.w3.org/2000/svg','${e}'));`:`$r=$A($r,$E($r.namespaceURI??'http://www.w3.org/1999/xhtml','${e}'));`),t.forEach((([t,$])=>{t&&'.'===t[0]&&y(`$S['${t.slice(1)}']=$Q($r);`),l(r,t??e)&&y(`$S['${t??e}']=$r;`),$!==_&&(y("$I($r);"),y(`$P(++$i,${$||_}??$S);`),A(`$P(++$i,${$||_}??$S);`))}))):y("$r=$r.parentNode;")},k.bind(_,'$r'),e=>{[o,s,f]=E(e),o?(y("$A($r,$I($T('')));++$i;"),A(`$U(++$i,${f});`)):y(`$A($r,$T(${s}));`)},(e,t)=>(R[e]??u)(t)]),y("this.textContent='';","$A(this,$r);"),C("return $s;"),[p(S+',$r,$e',y()),p(S,A()),p(S+',$s=!0',C())]})(e,t,s),$.set(e,[s,c,f]))})(),customElements.define(e,class extends HTMLElement{constructor(){super(),(t=>{let o,s=new i,l=new Map,[h,b,p]=$.get(e)??[],m=((e,t)=>[(t,$="")=>(d(e,{e:t,k:$,v:[],m:Reflect.has(t,$)}),t),(t,...$)=>{let{e:r,k:n,v:o,m:i}=e[t],s=c($),l=!1;if(!n||s>=1)for(let r=0;r<s;++r)if(o[r]!==$[r]){e[t].v=$,l=!0;break}if(l)if(n){try{if(i)return void(r[n]=(e=>!0===e||!1===e?e:null)($[0])??a($))}catch{}!1===$[0]?r.removeAttribute(n):r.setAttribute(n,!0===$[0]?'':a($))}else r.nodeValue=a($)},_=>{t.size&&(t.forEach(((e,t)=>{e.forEach(((e,$)=>t.removeEventListener($,e))),e.clear()})),t.clear()),e.splice(0,1/0)},(e,t)=>(e.append(t),t),(t,$)=>{const{e:n}=e[t],[o,i]=r.get(n);for(let e of i)void 0!==$[e]&&(o[e]=$[e])},e=>{const[t]=r.get(e);return t},(e,$,r)=>{let n=t.get(e);n||t.set(e,n=new Map),n.has($)&&e.removeEventListener($,n.get($)),e.addEventListener($,r),n.set($,r)}])([],l),v=[t,s,...f,...m,[]],[w,g,E]=p.map((e=>e.bind(...v))),S=-1;((e,t)=>{e.forEach((e=>t[e]=(t[e]??n).bind(t)))})(b,s),s.construct(),r.set(t,[s,h,m,(e,$)=>{S>e||(o=s.beforeRender(e)??1,o<=0&&u(),S=e+o-e%o,E()&&!$||w(),t.hidden||g())}])})(this)}connectedCallback(){(e=>{const[$,,,n]=r.get(e);t.autohide&&A.observe(e),n(0,!0),$.connected(e)})(this)}disconnectedCallback(){(e=>{let[$,,{2:n}]=r.get(e);t.autohide&&A.unobserve(e),r.delete(e),$.disconnected(e),e.textContent='',n()})(this)}})},y=e=>{r.forEach((({3:t})=>t(e))),requestAnimationFrame(y)};y(0),i.addEventListener('readystatechange',(e=>{if('complete'===i.readyState)for(;s.firstChild!==s.lastChild;)s.removeChild(s.firstChild)})),addEventListener('pagehide',(e=>{e.persisted||(s.textContent='')})),g("body{all:unset;display:block;contain:strict;overflow:hidden;position:fixed;inset:0}*,*::before,*::after{box-sizing:border-box}");let A=new IntersectionObserver((e=>{for(let{target:t,isIntersecting:$}of e)t.hidden=!$}),{root:_});e.web={r:(e,$)=>{t[e]=$},l:(e,r)=>{const[n]=/([a-z][a-z0-9-]*)$/.exec(e),o=structuredClone(m);if(!$.has(n)){v.forEach((e=>r[e]=w.bind(_,o,e)));let $=t[e](r)??class{};v.forEach((e=>r[e]=o[e])),S(n,r,$)}}}}));mdlr('[mdlr]::web:parser',(r=>{const e=/([a-zA-Z][a-zA-Z0-9-.]*)?/g,t=/([\x09\x0a\x0d\x20]+)?/g,n=/([^"{]+)?/g,o=/([^<{]+)/g,f=/(?:([#:/][a-z]*)\s*)?/g,l=/(?:([a-z.]+)?(?:\s*(=)\s*)?)?/g,s=/([^{(})]+)|([{(])|([})])?/g,_=null,[a,g,u,x,p,d,i,c,w]=[...'"()/<=>{}'],z=new Map([[w,c],[u,g]]),h=()=>{throw new Error},m=(r,...e)=>r.push(...e),A=r=>r.length;return(r,g,u,w,I=[],Z=[])=>{const[b,E,M,j]=g,[k,q,v]=(r=>{let e=0;return[(...t)=>{let n,o,f,l,s=[];for(n of t)n.lastIndex=l=e,[f,...o]=n.exec(r),e=n.lastIndex,e-l!==A(f)&&h(),m(s,...o);return s},t=>t===r[e]&&(++e,!0),()=>e<A(r)]})(r),y=(r,e=[])=>{if(q(c)){let t,n,o,f=[c],l='',[a,g]=k(r);for(;v()&&([t,n,o]=k(s),!o||(z.get(o)!==f.pop()&&h(),A(f)));)n&&m(f,n),l+=t??n??o??'';return m(e,[a||_,l||(g?'':_)]),!0}return!1},B=r=>{if(q(a))for(;v()&&!q(a);)y(f,r)||m(r,k(n))},C=(r,n,o)=>{for(;v()&&([,r]=k(t,e,t),r);){for(n=[],o=[];y(l,n););k(t),q(d)&&(k(t),y(f,o)||B(o)),E(r,n,o)}},D=()=>{A(I)&&(M(I),I=[])};let F,G,H;for(;v();)if(q(p)){if(D(),w=q(x),[u]=k(e,t),u&&'script'!==u||h(),!w){for(H=[];y(l,H););b(u,H),C()}(w||q(x))&&b(u),q(i)||h()}else y(f,Z)?([F,G]=Z[0]??[],F?(D(),j(F,G)):m(I,[_,G]),Z=[]):m(I,k(o));D()}}));mdlr('core:router',(e=>{const{decode:t}=e.require('router-url'),r=(e,{hash:t,path:r,search:h},s,n)=>({get params(){return r.match(e.regex)?.groups??{}},get search(){return Object.fromEntries(h??[])},hash:t,path:r,stream:s,headers:n});return{Router:class{#e={};#t;constructor(e="client"){['get','put','head','post','delete','options','connect'].forEach((e=>{this[e]=this.#r.bind(this,e),this.#e[e]=[]})),this.#t=e}#r(e,r,h){const s=t(`https://m${r}`).server,n=this.#e;return n[e]=n[e].filter((e=>e.path!==r)),n[e].push(Object.assign({},s,{handler:h})),this}#h(e,t){return this.#e[e].filter((e=>e.regex.test(t.path)))}filter(e,t){const h=t[this.#t]??{path:'/'};return this.#h(e,h).map((e=>()=>e.handler.call(e,r(e,h))))}match(e,t,h){const s=h[':method'].toLowerCase(),n=e[this.#t]??{path:'/'};return this.#h(s,n).map((e=>()=>e.handler.call(e,r(e,n,t,h))))}#s=this.handler.bind(this);handler(e){const r=this.filter('get',t(e.newURL,!0));if(1===r.length)return r[0]()}attach(e){self.addEventListener('hashchange',this.#s),e&&this.#s({newURL:e})}detach(){self.removeEventListener('hashchange',this.#s)}}}}));mdlr('demo:realworld-api',(e=>{const t='https://api.realworld.io/api';function s(e){const t={'Content-Type':'application/json'};return e&&(t.authorization=`Token ${e.token}`),t}return{login:async(e,a)=>await fetch(`${t}/users/login`,{method:'post',headers:s(),body:JSON.stringify({user:{email:e,password:a}})}).then((e=>e.json())),signup:async(e,a,o)=>await fetch(`${t}/users`,{method:'post',headers:s(),body:JSON.stringify({user:{email:e,password:a,username:o}})}).then((e=>e.json())),getFeed:async(e,a={})=>{const o=await fetch(`${t}/articles/feed?limit=10&offset=0`,{headers:s(e)}).then((e=>e.json()));return o.articles.count=o.articlesCount,o.articles},getArticles:async(e,a)=>{let o=`limit=10&offset=${a.offset||0}`;a.tag&&(o=`tag=${a.tag}&${o}`),a.username&&(o=`author=${a.username}&${o}`),a.favorited&&(o=`favorited=${a.favorited}&${o}`);const r=await fetch(`${t}/articles?${o}`,{headers:s(e)}).then((e=>e.json()));return r.articles.count=r.articlesCount,r.articles},getArticle:async(e,a)=>(await fetch(`${t}/articles/${a.slug}`,{headers:s(e)}).then((e=>e.json()))).article,favoriteArticle:async(e,a,o)=>{const r=await fetch(`${t}/articles/${a.slug}/favorite`,{method:o?'post':'delete',headers:s(e)}).then((e=>e.json()));return r.article||console.log(r),r.article},getArticleComments:async(e,a)=>(await fetch(`${t}/articles/${a.slug}/comments`,{headers:s(e)}).then((e=>e.json()))).comments,postArticleComments:async(e,a)=>(await fetch(`${t}/articles/${a.slug}/comments`,{method:'post',headers:s(e),body:JSON.stringify(a)}).then((e=>e.json()))).comment,deleteArticleComment:async(e,a)=>(await fetch(`${t}/articles/${a.slug}/comments/${a.id}`,{method:'delete',headers:s(e)}).then((e=>e.json()))).comment,getTags:async(e,a)=>(await fetch(`${t}/tags`,{headers:s(e)}).then((e=>e.json()))).tags,getProfile:async(e,a)=>(await fetch(`${t}/profiles/${a.username}`,{headers:s(e)}).then((e=>e.json()))).profile,updateProfile:async(e,a)=>await fetch(`${t}/user`,{method:'put',headers:s(e),body:JSON.stringify({user:a})}).then((e=>e.json())),follow:async(e,a)=>(await fetch(`${t}/profiles/${a.username}/follow`,{method:'post',headers:s(e)}).then((e=>e.json()))).profile,unfollow:async(e,a)=>(await fetch(`${t}/profiles/${a.username}/follow`,{method:'delete',headers:s(e)}).then((e=>e.json()))).profile,createArticle:async(e,a)=>(await fetch(`${t}/articles`,{method:'post',headers:s(e),body:JSON.stringify(a)}).then((e=>e.json()))).article,updateArticle:async(e,a)=>(await fetch(`${t}/articles/${a.article.slug}`,{method:'put',headers:s(e),body:JSON.stringify(a)}).then((e=>e.json()))).article,deleteArticle:async(e,a)=>(await fetch(`${t}/articles/${a.article.slug}`,{method:'delete',headers:s(e)}).then((e=>e.json()))).article}}));mdlr('[web]demo:realworld-app',(e=>{const{Router:t}=e.require('core:router');e.require('[web]demo:realworld-header'),e.require('[web]demo:realworld-main'),e.require('[web]demo:realworld-login'),e.require('[web]demo:realworld-settings'),e.require('[web]demo:realworld-article'),e.require('[web]demo:realworld-article-create'),e.require('[web]demo:realworld-profile'),e.require('[web]demo:realworld-footer');const r=e.require('demo:realworld-api');e.html`<realworld-header user={user}/>{#if path === '/'}<realworld-main{=}/>{:elseif path === '/login'}<realworld-login{=} mode="in"/>{:elseif path === '/register'}<realworld-login{=} mode="up"/>{:elseif path === '/settings'}<realworld-settings{=}/>{:elseif path === '/editor'}<realworld-article-create{=}/>{:elseif path === '/article'}<realworld-article{=}/>{:elseif path === '/profile'}<realworld-profile{=}/>{/if}<realworld-footer/>`,e.style`display: block;height: 100%;overflow: auto;background-color: white;`,e.global`a:hover { cursor: pointer }i[class] { padding-right: 4px }img.comment-author-img { margin-right: 4px }`,document.head.innerHTML+="\n<meta charset=\"utf-8\">\n<meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\n<title>Conduit</title>\n<link preconnect prefetch href=\"//code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css\" rel=\"stylesheet\" type=\"text/css\">\n<link preconnect prefetch href=\"//fonts.googleapis.com/css?family=Titillium+Web:700|Source+Serif+Pro:400,700|Merriweather+Sans:400,700|Source+Sans+Pro:400,300,600,700,300italic,400italic,600italic,700italic\" rel=\"stylesheet\" type=\"text/css\">\n<link preconnect prefetch rel=\"stylesheet\" href=\"//demo.productionready.io/main.css\">";const i=e=>{const t=Math.ceil(e.count/10);return new Array(t).fill(1).map(((e,t)=>t+1))};return class{#e=new t('client');api=r;path;user;search;actions;profile;articles;pages;construct(){const e=this.#t.bind(this);this.#e.get('/*',e),this.#e.get('/',e),this.actions={follow:async e=>this.api.follow(this.user,e),unfollow:async e=>this.api.unfollow(this.user,e),getArticle:async e=>await this.api.getArticle(this.user,{slug:e}),createArticle:async e=>this.api.createArticle(this.user,{article:e}),updateArticle:async e=>this.api.updateArticle(this.user,{article:e}),deleteArticle:async e=>this.api.deleteArticle(this.user,{article:e}),deleteComment:async e=>this.api.deleteArticleComment(this.user,e),postComment:async e=>this.api.postArticleComments(this.user,e)}}connected(){this.#e.attach(window.location.href)}disconnected(){this.#e.detach()}select(e){location.replace(`#/?tab=tag&tag=${e}`)}async#t({path:e,search:t={}}){console.log(e,t);const r=JSON.parse(localStorage.getItem('user')||'{}').user;this.search=t,this.user=r;const a=t.username??r?.username??'',s=10*(t.page-1);if('/'===e){switch(this.search.tab){default:case'global':this.articles=await this.api.getArticles(r,{offset:s});break;case'tag':this.articles=await this.api.getArticles(r,{...t,offset:s});break;case'your':this.articles=await this.api.getFeed(r,{offset:s})}this.pages=[...i(this.articles)]}else if('/profile'===e){const{tab:e=""}=t,s=await this.api.getArticles(r,'favorited'===e?{favorited:a}:{username:a}),l=await this.api.getProfile(r,t);this.articles=s,this.profile=l,this.pages=[...i(this.articles)]}this.path=e}}}));mdlr('[web]demo:realworld-article',(e=>(e.require('[web]demo:realworld-article-comments'),e.require('[web]demo:realworld-article-meta'),e.require('[web]demo:realworld-tags'),e.html`<div class="article-page"><div class="banner"><div class="container"><h1>{article?.title ?? '...'}</h1><realworld-article-meta{=}/></div></div><div class="container page">{#if article}<div class="row article-content"><div class="col-md-12"><p>{article.body}</p><realworld-tags{=} tags={article.tagList}/></div></div><hr /><div class="row"><realworld-article-comments{=}/></div>{:else}<div>loading article...</div>{/if}</div></div>`,e.style`button + button {margin-left: 0.2em;}`,class{api;user;search;actions;article;details=!0;async connected(){this.article=await this.api.getArticle(this.user,this.search)}select})));mdlr('[web]demo:realworld-article-comments',(t=>{const e=new Intl.DateTimeFormat('en-US',{month:'long',day:'numeric',year:'numeric'});return t.html`<div class="col-xs-12 col-md-8 offset-md-2">{#if !!user}<form class="card comment-form"><div class="card-block"><textarea{text} class="form-control" placeholder="Write a comment..." rows="3"/></div><div class="card-footer"><img src="{user.image}" class="comment-author-img"/><button class="btn btn-sm btn-primary" on{click=post}>Post Comment</button></div></form>{/if}{#each comment in comments}<div class="card"><div class="card-block"><p class="card-text">{comment.body}</p></div><div class="card-footer"><a href="#/profile" class="comment-author"><img src="{comment.author.image}" class="comment-author-img"/></a><a href="#/profile" class="comment-author">{comment.author.username}</a><span class="date-posted">{formatDate(comment)}</span>{#if comment.author.username === user.username}<button style="float:right" class="btn btn-outline-danger btn-sm" on{click=()=>deleteComment(comment)}><i class="ion-trash-a"/>Delete</button>{/if}</div></div>{/each}</div>`,class{api;user;search;actions;text;comments;async connected(){this.comments=(await this.api.getArticleComments(this.user,this.search)).sort(((t,e)=>e.updatedAt.localeCompare(t.updatedAt)))}formatDate(t){return e.format(new Date(t?.updatedAt||'1970-01-01'))}async deleteComment(t){await this.actions.deleteComment({slug:this.search.slug,id:t.id}),this.comments=await this.api.getArticleComments(this.user,this.search),this.text.value=''}async post(){await this.actions.postComment({slug:this.search.slug,comment:{body:this.text.value}}),this.comments=await this.api.getArticleComments(this.user,this.search),this.text.value=''}}}));mdlr('[web]demo:realworld-article-create',(t=>(t.html`<div class="editor-page"><div class="container page"><div class="row"><div class="col-md-10 offset-md-1 col-xs-12"><form><fieldset><fieldset class="form-group"><input type="text" value={title} class="form-control form-control-lg" placeholder="Article Title" on{input=e=>input('title',e)}/></fieldset><fieldset class="form-group"><input type="text" value={description} class="form-control" placeholder="What's this article about?" on{input=e=>input('description',e)}/></fieldset><fieldset class="form-group"><textarea value={body} class="form-control" rows="8" placeholder="Write your article (in markdown)" on{input=e=>input('body',e)}/></fieldset><fieldset class="form-group"><input type="text" value={tagList} class="form-control" placeholder="Enter tags" on{input=e=>input('tagList',e)}/><div class="tag-list"/></fieldset><button class="btn btn-lg pull-xs-right btn-primary" type="button" on{click}>{mode} Article</button></fieldset></form></div></div></div></div>`,class{search;actions;#t;async connected(){this.#t=this.search.slug?await this.actions.getArticle(this.search.slug):{}}input(t,{target:e}){this.#t[t]='tagList'===t?e.value.split(','):e.value}async click(){this.#t.tagList=this.#t.tagList.map((t=>t.trim())).filter((t=>t));const t=this.search?.slug?await this.actions.updateArticle(this.#t):await this.actions.createArticle(this.#t);location.replace(`#/editor?slug=${t.slug}`)}get mode(){return this.search?.slug?'Update':'Publish'}get title(){return this.#t?.title??''}get description(){return this.#t?.description??''}get body(){return this.#t?.body??''}get tagList(){return this.#t?.tagList??[]}})));mdlr('[web]demo:realworld-article-meta',(t=>{const e=new Intl.DateTimeFormat('en-US',{month:'long',day:'numeric',year:'numeric'});return t.html`<div class="article-meta">{#if article}<a href="#/profile?username={article.author.username}"><img alt="author" src="{article.author.image}"/></a><div class="info"><a href="#/profile?username={article.author.username}" class="author">{article.author.username}</a><span class="date">{formatDate()}</span></div>{#if !details}<button class="btn {favoriteClass()} btn-sm pull-xs-right" on{click=favoriteClick}><i class="ion-heart" />{article.favoritesCount}</button>{:elseif article.author.username !== user.username}<button class="btn btn-sm {followClass()}" on{click=followClick}><i class="ion-plus-round" />{following()} {article.author.username}</button><button class="btn btn-sm {favoriteClass()}" on{click=favoriteClick}><i class="ion-heart" />{favorited()} Article <span class="counter">({article.favoritesCount})</span></button>{:else}<button class="btn btn-outline-secondary btn-sm" on{click=editArticle}><i class="ion-edit" />Edit Article</button><button class="btn btn-outline-danger btn-sm" on{click=deleteArticle}><i class="ion-trash-a" />Delete Article</button>{/if}{:else}<div>...</div>{/if}</div>`,class{api;user;search;actions;article;details=!1;followClass(){return this.article?.author?.following?'btn-secondary':'btn-outline-secondary'}following(){return this.article?.author?.following?'Unfollow':'Follow'}favoriteClass(){return this.article?.favorited?'btn-primary':'btn-outline-primary'}favorited(){return this.article?.favorited?'Unfavorite':'Favorite'}formatDate(){return e.format(new Date(this.article?.updatedAt||this.article?.createdAt||'1970-01-01'))}async favoriteClick(t){this.search.slug=this.article?.slug;const e=await this.api.favoriteArticle(this.user,this.search,!this.article?.favorited);delete e.favoritedBy,Object.assign(this.article,e),location.replace(`#/article?slug=${this.article.slug}&t=${Date.now()}`)}async followClick(t){const{article:e,actions:a}=this;e?.author&&(await(e.author.following?a.unfollow:a.follow)(e.author),e.author.following=!e.author.following)}editArticle(){location.replace(`#/editor?slug=${this.article.slug}`)}deleteArticle(){this.actions.deleteArticle(this.article),location.replace("#/")}}}));mdlr('[web]demo:realworld-footer',(e=>{e.html`<footer><div class="container"><a href="#/" class="logo-font">conduit</a><span class="attribution">An interactive learning project from <a href="https://thinkster.io">Thinkster</a>. Code & design licensed under MIT.</span></div></footer>`,e.style`display: none;`}));mdlr('[web]demo:realworld-header',(a=>(a.html`<nav class="navbar navbar-light"><div class="container"><a class="navbar-brand" href="#/">conduit</a><ul class="nav navbar-nav pull-xs-right"><li class="nav-item"><a class="nav-link active" href="#/">Home</a></li>{#if !user}<li class="nav-item"><a class="nav-link" href="#/login">Sign in</a></li><li class="nav-item"><a class="nav-link" href="#/register">Sign up</a></li>{:else}<li class="nav-item"><a class="nav-link" href="#/editor"><i class="ion-compose"/>New Article</a></li><li class="nav-item"><a class="nav-link" href="#/settings"><i class="ion-gear-a"/>Settings</a></li><li class="nav-item"><a class="nav-link" href="#/profile?username={user.username}"><img loading="lazy" class="user-pic" src={user.image}>{user.username}</a></li>{/if}</ul></div></nav>`,class{user})));mdlr('[web]demo:realworld-login',(e=>(e.html`<div class="auth-page"><div class="container page"><div class="row"><div class="col-md-6 offset-md-3 col-xs-12"><h1 class="text-xs-center">Sign {mode}</h1>{#if mode === 'up'}<p class="text-xs-center"><a href="#/login">Have an account?</a></p>{:else}<p class="text-xs-center"><a href="#/register">Need an account?</a></p>{/if}<ul class="error-messages">{#if error}<li>{error}</li>{/if}</ul><form method="dialog">{#if mode === 'up'}<fieldset class="form-group"><input{username} class="form-control form-control-lg" type="text" placeholder="Your Name"/></fieldset>{/if}<fieldset class="form-group"><input{email} class="form-control form-control-lg" type="text" placeholder="Email"/></fieldset><fieldset class="form-group"><input{password} class="form-control form-control-lg" type="password" placeholder="Password"/></fieldset><button class="btn btn-lg btn-primary pull-xs-right" on{click}>Sign {mode}</button></form></div></div></div></div>`,e.style`ul {height: 1.5rem;line-height: 1.5rem;}`,class{api;mode='';error;username;email;password;click(e){'in'===this.mode&&this.login(),'up'===this.mode&&this.signup()}async login(){const e=this.email.value,s=this.password.value,r=await this.api.login(e,s);this.updateUserAndRedirect(r)}async signup(){const e=this.email.value,s=this.password.value,r=this.username.value,t=await this.api.signup(e,s,r);this.updateUserAndRedirect(t)}updateUserAndRedirect(e){e.errors?this.error=Object.entries(e.errors).reduce(((e,[s,r])=>e+`${s} ${r.join(', ')}`),''):(localStorage.setItem('user',JSON.stringify(e)),location.replace('#/'))}})));mdlr('[web]demo:realworld-main',(a=>(a.require('[web]demo:realworld-main-articles'),a.require('[web]demo:realworld-main-tags'),a.html`<div class="home-page">{#if !user}<div class="banner"><div class="container"><h1 class="logo-font">conduit</h1><p>A place to share your knowledge.</p></div></div>{/if}<div class="container page"><div class="row"><div class="col-md-9"><div class="feed-toggle"><ul class="nav nav-pills outline-active"><li class="nav-item"><a class="nav-link {active('')}" href="#/?tab=global">Global Feed</a></li>{#if !!user}<li class="nav-item"><a class="nav-link {active('your')}" href="#/?tab=your">Your Feed</a></li>{/if}{#if !!search.tag}<li class="nav-item"><a class="nav-link {active('tag')}" on{click=()=>select(search.tag)}># {search.tag}</a></li>{/if}</ul></div><realworld-main-articles{=}/><nav><ul class="pagination">{#each page in pages}<li class="page-item {(+search.page || 1) === page ? 'active' : ''}"><button class="page-link" on{click}>{page}</button></li>{/each}</ul></nav></div><div class="col-md-3"><realworld-main-tags{=}/></div></div></div></div>`,class{api;user;search;articles;pages;select;active(a){return a===(this.search.tab??'')?'active':''}click(a){const{tab:e,tag:l}=this.search,i=a.target.textContent;location.replace(`#/?tab=${e||''}${l?`&tag=${l}`:''}&page=${i}`)}})));mdlr('[web]demo:realworld-main-articles',(e=>(e.require('[web]demo:realworld-article-meta'),e.require('[web]demo:realworld-tags'),e.html`{#each article in articles}<div class="article-preview"><realworld-article-meta{=} article={}/><a href="#/article?slug={article.slug}" class="preview-link"><h1>{article.title}</h1><p>{article.description}</p><span>Read more...</span><realworld-tags{=} tags={article.tagList}/></a></div>{:else}{#if articles === null}<div class="article-preview">loading articles...</div>{:else}<div class="article-preview">No articles are here... yet.</div>{/if}{/each}`,class{api;user;search;actions;articles;select})));mdlr('[web]demo:realworld-main-tags',(a=>(a.require('[web]demo:realworld-tags'),a.html`<div class="sidebar"><p>Popular Tags</p><realworld-tags{=}/></div>`,class{api;user;tags=[];mode="default";async connected(){this.tags=await this.api.getTags(this.user)}select})));mdlr('[web]demo:realworld-profile',(i=>(i.require('[web]demo:realworld-main-articles'),i.html`<div class="profile-page"><div class="user-info"><div class="container"><div class="row">{#if profile}<div class="col-xs-12 col-md-10 offset-md-1"><img src="{profile.image}" class="user-img"/><h4>{profile.username}</h4><p>{profile.bio || ''}</p><button class="btn btn-sm btn-outline-secondary action-btn" on{click}><i class="ion-plus-round" />{following()} {profile.username}</button></div>{/if}</div></div></div><div class="container"><div class="row"><div class="col-xs-12 col-md-10 offset-md-1"><div class="articles-toggle"><ul class="nav nav-pills outline-active"><li class="nav-item"><a class="nav-link {active('')}" href="#/profile?username={username}">Articles</a></li><li class="nav-item"><a class="nav-link {active('favorited')}" href="#/profile?username={username}&tab=favorited">Favorited Articles</a></li></ul></div><realworld-main-articles{=}/></div></div></div></div>`,class{api;user;search;actions;profile;articles;select;active(i){return i===(this.search.tab??'')?'active':''}following(){return this.profile.following?'Unfollow':'Follow'}async click(i){const{profile:l,actions:e}=this;await(l.following?e.unfollow:e.follow)(l),l.following=!l.following}get username(){return this.search?.username??this.user?.username??''}})));mdlr('[web]demo:realworld-settings',(e=>(e.html`<div class="settings-page"><div class="container page"><div class="row"><div class="col-md-6 offset-md-3 col-xs-12"><h1 class="text-xs-center">Your Settings</h1><form method="dialog"><fieldset><fieldset class="form-group"><input{image} class="form-control" type="text" placeholder="URL of profile picture" value={user.image}/></fieldset><fieldset class="form-group"><input{username} class="form-control form-control-lg" type="text" placeholder="Your Name" value={user.username}/></fieldset><fieldset class="form-group"><textarea{bio} class="form-control form-control-lg" rows="8" placeholder="Short bio about you">{user.bio || ''}</textarea></fieldset><fieldset class="form-group"><input{email} class="form-control form-control-lg" type="text" placeholder="Email" value={user.email}/></fieldset><fieldset class="form-group"><input{password} class="form-control form-control-lg" type="password" placeholder="Password"/></fieldset><button class="btn btn-lg btn-primary pull-xs-right" on{click=update}>Update Settings</button></fieldset></form>{#if !!user}<hr /><button class="btn btn-outline-danger" on{click=logout}>Or click here to logout.</button>{/if}</div></div></div></div>`,class{api;user;bio;image;email;password;username;logout(){localStorage.setItem('user','{}'),location.replace('#/')}async update(){const e=[['image',this.image.value,this.user.image!==this.image.value],['username',this.username.value,this.user.username!==this.username.value],['bio',this.bio.value,(this.user.bio||'')!==this.bio.value],['email',this.email.value,this.user.email!==this.email.value],['password',this.password.value,!!this.password.value]].reduce(((e,[s,t,l])=>(l&&(e[s]=t),e)),{}),s=await this.api.updateProfile(this.user,e);Object.assign(this.user,s.user),localStorage.setItem('user',JSON.stringify(s)),location.replace('#/')}})));mdlr('[web]demo:realworld-tags',(t=>(t.html`<ul class="tag-list">{#each tag in tags}<li><a class="tag-default tag-pill tag-{mode}" on{click}>{tag}</a></li>{:else}<span>loading tags...</span>{/each}</ul>`,class{mode='outline';tags=[];click(t){this.select(t.target.textContent),t.stopPropagation(),t.preventDefault()}select(t){}})));mdlr('router-url',(n=>{function e(n){const e=n.split('/').map((n=>':'!==n[0]?'*'===n?'.+':n:`(?<${n.slice(1)}>[^/]+)`));return new RegExp(`^${e.join('/')}$`)}function r(n,r){return n?{path:n.pathname,hash:n.hash.slice(1),regex:r?null:e(n.pathname),search:n.searchParams}:null}return{decode:function(n,e=!1){const i=new URL(decodeURI(n));let t,[,a,h]=i.hash.split('#');return a&&'/'===a[0]?(t=new URL(a??'',i.origin),a=''):t=new URL(h??'',i.origin),t.hash=a??'',i.hash='',{origin:i.origin,server:r(i,e),client:void 0!==a?r(t,e):null}}}}));mdlr('[web]demo:realworld-app')